<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex, follow">
    <title>NEWYORKER: Password Reset</title>
    <link rel="stylesheet" href="https://api.newyorker.de/public/assets/css/ny_style.css">
    <link rel="apple-touch-icon" sizes="180x180"
          href="https://api.newyorker.de/public/assets/images/html/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png"
          href="https://api.newyorker.de/public/assets/images/html/favicons/favicon-32x32.png"
          sizes="32x32">
    <link rel="icon" type="image/png"
          href="https://api.newyorker.de/public/assets/images/html/favicons/favicon-16x16.png"
          sizes="16x16">
    <link rel="manifest" href="https://api.newyorker.de/public/assets/images/html/favicons/manifest.json">
    <link rel="mask-icon" href="https://api.newyorker.de/public/assets/images/html/favicons/safari-pinned-tab.svg"
          color="#e2001a">
    <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="main">
    <div id="ny-app-ph-l"></div>
    <div class="content" id="ny-app-pw-r">
        <a id="ny-logo" href="https://www.newyorker.de">
            <img src="https://api.newyorker.de/public/assets/images/html/ny_logo.png" alt=""/>
        </a>
        <h1>Please reset Your Password<span id='app'></span></h1>
        <noscript>We apologize, but resetting your password requires javascript</noscript>
        <div class='error' id='error'></div>
        <form id='form' action='#' method='POST'>
            <label>New Password for <span id='username_label'></span></label><br/><br/>
            <input name="new_password" type="password" id="ny-input-pw"/>
            <input name='utf-8' type='hidden' value='âœ“'/>
            <input name="username" id="username" type="hidden"/>
            <input name="token" id="token" type="hidden"/><br/>
            <button>Change Password</button>
        </form>
    </div>
    <div id="ny-app-ph-r"></div>

</div>
<script language='javascript' type='text/javascript'>
  <!--
  window.onload = function () {
    var urlParams = {};
    (function () {
      var pair, // Really a match. Index 0 is the full match; 1 & 2 are the key & val.
          tokenize = /([^&=]+)=?([^&]*)/g,
          // decodeURIComponents escapes everything but will leave +s that should be ' '
          re_space = function (s) {
            return decodeURIComponent(s.replace(/\+/g, " "));
          },
          // Substring to cut off the leading '?'
          querystring = window.location.search.substring(1);

      while (pair = tokenize.exec(querystring))
        urlParams[re_space(pair[1])] = re_space(pair[2]);
    })();

    var id = urlParams['id'];
    var base = PARSE_SERVER_URL;
    document.getElementById('form').setAttribute('action', base + '/apps/' + id + '/request_password_reset');
    document.getElementById('username').value = urlParams['username'];
    document.getElementById('username_label').appendChild(document.createTextNode(urlParams['username']));

    document.getElementById('token').value = urlParams['token'];
    if (urlParams['error']) {
      document.getElementById('error').appendChild(document.createTextNode(urlParams['error']));
    }
    if (urlParams['app']) {
      document.getElementById('app').appendChild(document.createTextNode(' for ' + urlParams['app']));
    }
  }
  //-->
</script>
</body>
</html>